/*
 * Meran - MERAN UNLP is a ILS (Integrated Library System) wich provides Catalog,
 * Circulation and User's Management. It's written in Perl, and uses Apache2
 * Web-Server, MySQL database and Sphinx 2 indexing.
 * Copyright (C) 2009-2013 Grupo de desarrollo de Meran CeSPI-UNLP
 *
 * This file is part of Meran.
 *
 * Meran is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * Meran is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Meran.  If not, see <http://www.gnu.org/licenses/>.
 */

var bootbox=window.bootbox||function(){function i(c,a){null==a&&(a=j);return"string"==typeof g[a][c]?g[a][c]:a!=_defaultLocale?i(c,_defaultLocale):c}var j=_defaultLocale="en",m=!0,e={},g={en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"}};e.setLocale=function(c){for(var a in g)if(a==c){j=c;return}throw Error("Invalid locale: "+
c);};e.addLocale=function(c,a){"undefined"==typeof g[c]&&(g[c]={});for(var b in a)g[c][b]=a[b]};e.alert=function(){var c="",a=i("OK"),b=null;switch(arguments.length){case 1:c=arguments[0];break;case 2:c=arguments[0];"function"==typeof arguments[1]?b=arguments[1]:a=arguments[1];break;case 3:c=arguments[0];a=arguments[1];b=arguments[2];break;default:throw Error("Incorrect number of arguments: expected 1-3");}return e.dialog(c,{label:a,callback:b},{onEscape:b})};e.confirm=function(){var c="",a=i("CANCEL"),
b=i("CONFIRM"),f=null;switch(arguments.length){case 1:c=arguments[0];break;case 2:c=arguments[0];"function"==typeof arguments[1]?f=arguments[1]:a=arguments[1];break;case 3:c=arguments[0];a=arguments[1];"function"==typeof arguments[2]?f=arguments[2]:b=arguments[2];break;case 4:c=arguments[0];a=arguments[1];b=arguments[2];f=arguments[3];break;default:throw Error("Incorrect number of arguments: expected 1-4");}return e.dialog(c,[{label:a,callback:function(){"function"==typeof f&&f(!1)}},{label:b,callback:function(){"function"==
typeof f&&f(!0)}}])};e.modal=function(){var c,a,b,f={onEscape:null,keyboard:!0,backdrop:!0};switch(arguments.length){case 1:c=arguments[0];break;case 2:c=arguments[0];"object"==typeof arguments[1]?b=arguments[1]:a=arguments[1];break;case 3:c=arguments[0];a=arguments[1];b=arguments[2];break;default:throw Error("Incorrect number of arguments: expected 1-3");}f.header=a;b="object"==typeof b?$.extend(f,b):f;return e.dialog(c,[],b)};e.dialog=function(c,a,b){var f=null,e="",i=[],b=b||{};null==a?a=[]:"undefined"==
typeof a.length&&(a=[a]);for(var d=a.length;d--;){var g=null,l=null,j=null;if("undefined"==typeof a[d].label&&"undefined"==typeof a[d]["class"]&&"undefined"==typeof a[d].callback){var g=0,n=null,k;for(k in a[d])if(n=k,g++,1<g)break;1==g&&"function"==typeof a[d][k]&&(a[d].label=n,a[d].callback=a[d][k])}"function"==typeof a[d].callback&&(j=a[d].callback);a[d]["class"]?l=a[d]["class"]:d==a.length-1&&2>=a.length&&(l="btn-primary");g=a[d].label?a[d].label:"Option "+(d+1);e+="<a data-handler='"+d+"' class='btn "+
l+"' href='#'>"+g+"</a>";i[d]=j}a=["<div class='bootbox modal'>"];if(b.header){d="";if("undefined"==typeof b.headerCloseButton||b.headerCloseButton)d="<a href='#' class='close'>&times;</a>";a.push("<div class='modal-header'>"+d+"<h3>"+b.header+"</h3></div>")}a.push("<div class='modal-body'></div>");e&&a.push("<div class='modal-footer'>"+e+"</div>");a.push("</div>");var h=$(a.join("\n"));("undefined"===typeof b.animate?m:b.animate)&&h.addClass("fade");$(".modal-body",h).html(c);h.bind("hidden",function(){h.remove()});
h.bind("hide",function(){if("escape"==f&&"function"==typeof b.onEscape)b.onEscape()});$(document).bind("keyup.modal",function(a){27==a.which&&(f="escape")});h.bind("shown",function(){$("a.btn-primary:last",h).focus()});$("a",h).click(function(a){a.preventDefault();f="button";h.modal("hide");a=$(this).data("handler");a=i[a];"function"==typeof a&&a()});null==b.keyboard&&(b.keyboard="function"==typeof b.onEscape);$("body").append(h);h.modal({backdrop:b.backdrop||!0,keyboard:b.keyboard});return h};e.hideAll=
function(){$(".bootbox").modal("hide")};e.animate=function(c){m=c};return e}();