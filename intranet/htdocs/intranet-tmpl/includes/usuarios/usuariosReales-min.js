var nro_socio_temp,vDatosUsuario=0;function modificarDatosDeUsuario(){objAH=new AjaxHelper(updateModificarDatosDeUsuario),objAH.showOverlay=!0,objAH.debug=!0,objAH.url=URL_PREFIX+"/usuarios/reales/usuariosRealesDB.pl",objAH.debug=!0,objAH.nro_socio=USUARIO.ID,nro_socio_temp=objAH.nro_socio,objAH.tipoAccion="MODIFICAR_USUARIO",objAH.sendToServer()}function updateModificarDatosDeUsuario(o){if(!verificarRespuesta(o))return 0;$("#modificar-datos-usuario").html(o),$("#modificar-datos-usuario").modal()}function guardarModificacionUsuario(){$("#modificar-datos-usuario").modal("hide"),objAH=new AjaxHelper(updateGuardarModificacionUsuario),objAH.url=URL_PREFIX+"/usuarios/reales/usuariosRealesDB.pl",objAH.debug=!0,objAH.showOverlay=!0,objAH.nro_socio=nro_socio_temp,objAH.sexo=$("input[@name=sexo]:checked").val(),objAH.calle=$("#calle").val(),objAH.nombre=$("#nombre").val(),objAH.nacimiento=$("#nacimiento").val(),objAH.email=$("#email").val(),objAH.telefono=$("#telefono").val(),objAH.cod_categoria=$("#categoria_socio_id").val(),objAH.id_estado=$("#estado_id").val(),objAH.ciudad=$("#id_ciudad").val(),objAH.alt_calle=$("#alt_calle").val(),objAH.alt_ciudad=$("#id_alt_ciudad").val(),objAH.alt_telefono=$("#telefono_laboral").val(),objAH.apellido=$("#apellido").val(),objAH.id_ui=$("#id_ui").val(),objAH.codigo_postal=$("#codigo_postal").val(),objAH.tipo_documento=$("#tipo_documento_id").val(),objAH.nro_documento=$("#nro_documento").val(),objAH.legajo=$("#legajo").val(),objAH.institucion=$("#institucion").val(),objAH.carrera=$("#carrera").val(),objAH.anio=$("#anio").val(),objAH.division=$("#division").val(),objAH.changepassword=$("#changepassword").is(":checked")?"1":"0",objAH.cumple_requisito=$("#cumple_requisito").is(":checked")?"1":"0",objAH.tipoAccion="GUARDAR_MODIFICACION_USUARIO",objAH.auth_nombre=$("#auth_nombre").val(),objAH.auth_dni=$("#auth_dni").val(),objAH.auth_telefono=$("#auth_telefono").val(),objAH.sendToServer(),startOverlay()}function updateGuardarModificacionUsuario(o){var a=JSONstring.toObject(o);setMessages(a),detalleUsuario()}function add(){return agregarUsuario(),!1}function save_modif(){return guardarModificacionUsuario(),!1}function eliminarUsuario(){bootbox.confirm(CONFIRMA_LA_BAJA,function(o){o&&(objAH=new AjaxHelper(updateEliminarUsuario),objAH.url=URL_PREFIX+"/usuarios/reales/usuariosRealesDB.pl",objAH.debug=!0,objAH.showOverlay=!0,objAH.nro_socio=USUARIO.ID,objAH.tipoAccion="ELIMINAR_USUARIO",objAH.sendToServer(),startOverlay())})}function updateEliminarUsuario(o){if(!verificarRespuesta(o))return 0;var a=JSONstring.toObject(o);setMessages(a),hayError(a)||(window.location.href=URL_PREFIX+"/usuarios/potenciales/buscarUsuario.pl?token="+token)}function agregarUsuario(){objAH=new AjaxHelper(updateAgregarUsuario),objAH.url=URL_PREFIX+"/usuarios/reales/usuariosRealesDB.pl",objAH.showOverlay=!0,objAH.debug=!0,0==$.trim(nro_socio).length||$("#nro_socio").val()==AUTO_GENERAR_LABEL?objAH.auto_nro_socio=1:objAH.nro_socio=$("#nro_socio").val(),objAH.sexo=$("input[@name=sexo]:checked").val(),objAH.calle=$("#calle").val(),objAH.nombre=$("#nombre").val(),objAH.nacimiento=$("#nacimiento").val(),objAH.email=$("#email").val(),objAH.telefono=$("#telefono").val(),objAH.cod_categoria=$("#categoria_socio_id").val(),objAH.id_estado=$("#estado_id").val(),objAH.ciudad=$("#id_ciudad").val(),objAH.alt_ciudad=$("#id_alt_ciudad").val(),objAH.alt_calle=$("#alt_calle").val(),objAH.alt_telefono=$("#alt_telefono").val(),objAH.apellido=$("#apellido").val(),objAH.id_ui=$("#id_ui").val(),objAH.tipo_documento=$("#tipo_documento_id").val(),objAH.credential_type=$("#credential").val(),objAH.nro_documento=$("#nro_documento").val(),objAH.codigo_postal=$("#codigo_postal").val(),objAH.legajo=$("#legajo").val(),objAH.institucion=$("#institucion").val(),objAH.carrera=$("#carrera").val(),objAH.anio=$("#anio").val(),objAH.division=$("#division").val(),objAH.cumple_requisito=$("#cumple_requisito").is(":checked")?"1":"0",objAH.changepassword=$("#changepassword").is(":checked")?"1":"0",objAH.tipoAccion="AGREGAR_USUARIO",objAH.sendToServer()}function updateAgregarUsuario(o){if(!verificarRespuesta(o))return 0;var a=JSONstring.toObject(o);setMessages(a),a.error||delay(function(){window.location=URL_PREFIX+"/usuarios/reales/datosUsuario.pl?nro_socio="+a.messages[0].params[0]+"&token="+token},3)}function agregarAutorizado(){objAH=new AjaxHelper(updateAgregarAutorizado),objAH.showOverlay=!0,objAH.url=URL_PREFIX+"/usuarios/reales/usuariosRealesDB.pl",objAH.tipoAccion="MOSTRAR_VENTANA_AGREGAR_AUTORIZADO",objAH.debug=!0,objAH.sendToServer()}function updateAgregarAutorizado(o){if(!verificarRespuesta(o))return 0;$("#basic-modal-content").html(o),$("#basic-modal-content").modal()}function confirmarAgregarAutorizado(){verificarDatos()&&(objAH=new AjaxHelper(updateConfirmarAgregarAutorizado),objAH.url=URL_PREFIX+"/usuarios/reales/usuariosRealesDB.pl",objAH.debug=!0,objAH.showOverlay=!0,objAH.nro_socio=NRO_SOCIO_AUTH,objAH.auth_nombre=$("#nombreAutorizado").val(),objAH.auth_dni=$("#dniAutorizado").val(),objAH.auth_telefono=$("#telefonoAutorizado").val(),objAH.tipoAccion="AGREGAR_AUTORIZADO",objAH.sendToServer())}function updateConfirmarAgregarAutorizado(o){var a=JSONstring.toObject(o);setMessages(a),$("#basic-modal-content").modal("hide"),detalleUsuario()}function desautorizarTercero(o,a){bootbox.confirm(CONFIRMAR_ELIMINAR_AFILIADO,function(o){o&&(objAH=new AjaxHelper(updateDesautorizarTercero),objAH.debug=!0,objAH.showOverlay=!0,objAH.url=URL_PREFIX+"/usuarios/reales/usuariosRealesDB.pl",objAH.nro_socio=USUARIO.ID,objAH.tipoAccion="ELIMINAR_AUTORIZADO",objAH.sendToServer())})}function updateDesautorizarTercero(o){if(!verificarRespuesta(o))return 0;var a=JSONstring.toObject(o);setMessages(a),detalleUsuario()}function resetPassword(o,a){bootbox.confirm(RESET_PASSWORD,function(o){o&&(objAH=new AjaxHelper(updateResetPassword),objAH.showOverlay=!0,objAH.url=URL_PREFIX+"/usuarios/reales/usuariosRealesDB.pl",objAH.nro_socio=USUARIO.ID,objAH.tipoAccion="RESET_PASSWORD",objAH.sendToServer())})}function updateResetPassword(o){if(!verificarRespuesta(o))return 0;var a=JSONstring.toObject(o);setMessages(a)}function clearInput(){$("#newpassword").val(""),$("#newpassword1").val("")}function cambiarPassword(){$("#formCambioPassword").submit()}function eliminarFoto(o){o=user_picture_name,bootbox.confirm(CONFIRMAR_ELIMINAR_FOTO,function(a){a&&(objAH=new AjaxHelper(updateEliminarFoto),objAH.debug=!0,objAH.showOverlay=!0,objAH.url=URL_PREFIX+"/usuarios/reales/usuariosRealesDB.pl",objAH.tipoAccion="ELIMINAR_FOTO",objAH.foto_name=o,objAH.nro_socio=USUARIO.ID,objAH.sendToServer())})}function updateEliminarFoto(o){if(!verificarRespuesta(o))return 0;$("#foto").html("");var a=JSONstring.toObject(o);setMessages(a),$("#div_uploader").show(),$("#div_boton_eliminar_foto").hide(),detalleUsuario()}function validarDatosCensales(){objAH=new AjaxHelper(updateValidarDatosCensales),objAH.debug=!0,objAH.showOverlay=!0,objAH.url=URL_PREFIX+"/usuarios/reales/usuariosRealesDB.pl",objAH.debug=!0,objAH.nro_socio=USUARIO.ID,nro_socio_temp=objAH.nro_socio,objAH.tipoAccion="VALIDAR_DATOS_CENSALES",objAH.sendToServer()}function updateValidarDatosCensales(o){if(!verificarRespuesta(o))return 0;var a=JSONstring.toObject(o);setMessages(a),detalleUsuario()}function cambiarCredencial(){objAH=new AjaxHelper(updateCambiarCredencial),objAH.url=URL_PREFIX+"/usuarios/reales/usuariosRealesDB.pl",objAH.debug=!0,objAH.showOverlay=!0,objAH.nro_socio=USUARIO.ID,objAH.tipoAccion="CAMBIAR_CREDENCIAL",objAH.sendToServer()}function updateCambiarCredencial(o){if(!verificarRespuesta(o))return 0;$("#basic-modal-content").html(o),$("#basic-modal-content").modal()}function guardarModificacionCredenciales(){$("#basic-modal-content").modal("hide"),objAH=new AjaxHelper(updateModificacionCredenciales),objAH.url=URL_PREFIX+"/usuarios/reales/usuariosRealesDB.pl",objAH.showOverlay=!0,objAH.debug=!0,objAH.nro_socio=USUARIO.ID,objAH.tipoAccion="GUARDAR_MODIFICACION_CREDENCIALES",objAH.credenciales=$("#credential").val(),objAH.sendToServer()}function updateModificacionCredenciales(o){if(!verificarRespuesta(o))return 0;var a=JSONstring.toObject(o);setMessages(a),detalleUsuario(USUARIO.ID)}function showModalCambiarNroSocio(){$("#modificar-nro-socio").modal("show"),$("#nuevo_nro_socio").val(USUARIO.ID)}function cambiarNroSocio(o){$("#modificar-nro-socio").modal("hide"),o||(o=$("#nuevo_nro_socio").val()),objAH=new AjaxHelper(updateGuardarModificacionUsuario),objAH.url=URL_PREFIX+"/usuarios/reales/usuariosRealesDB.pl",objAH.debug=!0,objAH.showOverlay=!0,objAH.nro_socio=USUARIO.ID,objAH.nuevo_nro_socio=o,objAH.tipoAccion="CAMBIAR_NRO_SOCIO",nro_socio_temp=USUARIO.ID,USUARIO.ID=o,objAH.sendToServer(),startOverlay()}function updateGuardarModificacionUsuario(o){var a=JSONstring.toObject(o);setMessages(a),a.error&&(USUARIO.ID=nro_socio_temp),detalleUsuario()}function verPermisosActuales(){usuario=USUARIO.ID,""!=$.trim(usuario)&&(objAH=new AjaxHelper(updateVerPermisosActuales),objAH.url=URL_PREFIX+"/admin/permisos/permisosDB.pl",objAH.cache=!1,objAH.showOverlay=!0,objAH.nro_socio=usuario,objAH.accion="VER_PERMISOS_ACTUALES",objAH.sendToServer())}function updateVerPermisosActuales(o){$("#permisosUsuario").html(o),$("#permisosUsuario").modal("show")}function sancionManual(){objAH=new AjaxHelper(updateSancionManual),objAH.url=URL_PREFIX+"/usuarios/reales/usuariosRealesDB.pl",objAH.debug=!0,objAH.showOverlay=!0,objAH.nro_socio=USUARIO.ID,objAH.tipoAccion="SANCION_MANUAL",objAH.sendToServer()}function updateSancionManual(o){if(!verificarRespuesta(o))return 0;$("#sancionManual").html(o),$("#sancionManual").modal()}function aplicarSancionManual(){$("#sancionManual").modal("hide"),nro_socio=$("#nro_socio_sancion_hidden").val(),dias=$("#dias_sancion_manual").val(),motivo=$("#motivo_sancion_manual").val(),objAH=new AjaxHelper(updateAplicarSancionManual),objAH.url=URL_PREFIX+"/usuarios/reales/usuariosRealesDB.pl",objAH.debug=!0,objAH.showOverlay=!0,objAH.nro_socio=USUARIO.ID,objAH.dias=dias,objAH.motivo=motivo,objAH.tipoAccion="APLICAR_SANCION_MANUAL",objAH.sendToServer(),startOverlay()}function updateAplicarSancionManual(o){var a=JSONstring.toObject(o);setMessages(a),a.error&&(USUARIO.ID=nro_socio_temp),detalleUsuario()}